#MongoDB Store 개발 및 테스트

##스키마 디자인

관계형 데이터베이스가 데이터를 중심으로 모델링한다면 MongoDB는 데이터 뿐만 아니라 애플리케이션에 따라서도 스키마 디자인이 달라진다. 애플리케이션까지 고려한다는 것은 데이터의 일관성을 유지하고 읽기와 쓰기 성능을 최적화하는 것을 의미한다. 앞서 개요에서  MongoDB는 미리 정해진 스키마 없이 개발을 시작할 수 있다고 했다. 역설적으로 들리겠지만 고정된 스키마가 없기 때문에  스키마 디자인은 더욱 중요하다.

스키마 디자인을 할 때 MongoDB는 다음 사항을  고려해야 한다.  첫째는 읽기와 쓰기의 빈도이다. 빠른 읽기가 중요한 애플리케이션은 적절한 인텍스를 생성하여 질의 성능을 향상시키고 쓰기가 빈번한 애플리케이션은 너무 많은 인텍스를 만들지 않아야 한다.  둘째는 데이터의 질의와 수정을 고려해야 한다. 도큐먼트 데이터베이스를 사용할 때 흔히 하는 실수는 하나의 도큐먼트에서 모든 관계를 표현하는 경우이다. 이런 경우는 데이터의 질의와 수정을 어렵게한다. 셋째는 데이터의 생애주기와 늘어나는 양을 예측하여 설계해야 한다. 개발 환경에서는 특별한 문제가 발생하지 않는다해도 배포 후 운영 중에 문제가 발생한다면 큰 낭패를 볼 수 있기 때문에 대용량의 데이터를 처리하는 애플리케이션은 부하테스트를 꼭 해야한다. 마지막으로 분석을 목적으로 하는 애플리케이션은 맵리듀스 또는 집계aggregation 처리가 쉽도록 디자인해야한다.

### 설계 패턴

대표적인 MongoDB의 설계 패턴은 아래와 같다.

일대일

일대다

다대다

트리

주의할 점



